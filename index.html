<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tipos de almacenamiento de datos | Guía educativa</title>
  <meta name="description" content="Filtros, tarjetas, tabla comparativa, glosario y quiz sobre almacenamiento de datos. Cumple las pruebas A–F de filtrado." />
  <link rel="icon" href="data:,">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { container: { center: true, padding: "1rem" } } } };
  </script>
  <style>
    :focus { outline: 3px solid #1d4ed8; outline-offset: 2px; }
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900">
  <header class="bg-white border-b">
    <div class="container mx-auto py-6">
      <h1 class="text-3xl font-bold">Tipos de almacenamiento de datos</h1>
      <p class="mt-2 text-slate-600">Explora tecnologías, compara características, aprende términos clave y valida tu aprendizaje con un quiz.</p>
      <nav class="mt-4 flex flex-wrap gap-3 text-sm">
        <a href="#filtro" class="underline hover:no-underline">Filtro</a>
        <a href="#tarjetas" class="underline hover:no-underline">Tarjetas</a>
        <a href="#tabla" class="underline hover:no-underline">Tabla comparativa</a>
        <a href="#glosario" class="underline hover:no-underline">Glosario</a>
        <a href="#quiz" class="underline hover:no-underline">Quiz</a>
      </nav>
    </div>
  </header>

  <main class="container mx-auto py-8 space-y-16">
    <!-- Filtro -->
    <section id="filtro" class="bg-white p-6 rounded-2xl shadow">
      <h2 class="text-2xl font-semibold">Filtra tecnologías</h2>
      <p class="mt-2 text-slate-600">Texto + Tipo + Uso. Se aplican todos los filtros seleccionados.</p>

      <form class="mt-4 grid gap-4 md:grid-cols-4" onsubmit="event.preventDefault()">
        <label class="block">
          <span class="block text-sm font-medium">Tipo</span>
          <select id="filter-tipo" class="mt-1 w-full rounded border-slate-300" aria-label="Filtrar por tipo">
            <!-- opciones pobladas en JS para fijar exactamente las del enunciado -->
          </select>
        </label>

        <label class="block">
          <span class="block text-sm font-medium">Uso</span>
          <select id="filter-uso" class="mt-1 w-full rounded border-slate-300" aria-label="Filtrar por uso">
            <!-- opciones pobladas en JS -->
          </select>
        </label>

        <label class="block md:col-span-2">
          <span class="block text-sm font-medium">Buscar por nombre o sinónimo</span>
          <input id="filter-texto" class="mt-1 w-full rounded border-slate-300" placeholder="Ej. ssd, nas, s3, postgresql, redis, lto">
        </label>

        <div class="flex items-end gap-2">
          <button type="button" id="btn-aplicar" class="px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700">Aplicar</button>
          <button type="button" id="btn-limpiar" class="px-4 py-2 rounded border">Limpiar</button>
        </div>
      </form>
      <p id="no-result" class="hidden mt-3 text-sm text-amber-700">No hay elementos que coincidan con el filtro.</p>
    </section>

    <!-- Tarjetas -->
    <section id="tarjetas" class="space-y-6">
      <h2 class="text-2xl font-semibold">Tarjetas de tecnologías</h2>
      <div id="grid-cards" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"></div>
    </section>

    <!-- Tabla -->
    <section id="tabla" class="bg-white p-6 rounded-2xl shadow">
      <h2 class="text-2xl font-semibold">Tabla comparativa</h2>
      <div class="overflow-x-auto mt-4">
        <table class="w-full text-sm">
          <caption class="sr-only">Comparativa de tecnologías de almacenamiento</caption>
          <thead class="bg-slate-100">
            <tr>
              <th class="text-left p-3">Tecnología</th>
              <th class="text-left p-3">Tipo</th>
              <th class="text-left p-3">Uso</th>
              <th class="text-left p-3">Latencia</th>
              <th class="text-left p-3">Rendimiento</th>
              <th class="text-left p-3">Durabilidad</th>
              <th class="text-left p-3">Escalabilidad</th>
              <th class="text-left p-3">Coste</th>
            </tr>
          </thead>
          <tbody id="tabla-body"></tbody>
        </table>
      </div>
    </section>

    <!-- Glosario -->
    <section id="glosario" class="bg-white p-6 rounded-2xl shadow">
      <h2 class="text-2xl font-semibold">Glosario</h2>
      <dl id="glosario-list" class="mt-4 grid gap-4 md:grid-cols-2"></dl>
    </section>

    <!-- Quiz -->
    <section id="quiz" class="bg-white p-6 rounded-2xl shadow">
      <h2 class="text-2xl font-semibold">Quiz rápido</h2>
      <p class="mt-2 text-slate-600">Responde y comprueba. No se guardan datos.</p>
      <form id="quiz-form" class="mt-4 space-y-6" onsubmit="event.preventDefault(); evaluarQuiz();"></form>
      <div id="quiz-resultado" class="mt-4 font-medium"></div>
    </section>
  </main>

  <footer class="border-t">
    <div class="container mx-auto py-8 text-sm text-slate-600">
      <p>Contenido educativo. Última actualización <span id="fecha"></span>.</p>
    </div>
  </footer>

  <script>
    // ======= Dataset con grupos, usos y sinónimos que casan con las pruebas =======
    const items = [
      {
        nombre: "RAM",
        grupo: "Memoria",
        tipo: "memoria",
        usos: ["latencia-muy-baja"],
        ejemplos: ["DDR4", "DDR5"],
        keywords: ["ram","memoria"],
        latencia: "Nanosegundos",
        rendimiento: "Muy alto",
        durabilidad: "Volátil",
        escalabilidad: "Limitada por placa base",
        coste: "Alto",
        desc: "Memoria volátil de muy baja latencia para datos en uso inmediato."
      },
      {
        nombre: "SSD NVMe",
        grupo: "Disco",
        tipo: "bloques",
        usos: ["alto-rendimiento"],
        ejemplos: ["Samsung 980 Pro","WD Black"],
        keywords: ["ssd","nvme","disco"],
        latencia: "Decenas de µs",
        rendimiento: "Alto",
        durabilidad: "Buena (ciclos de escritura limitados)",
        escalabilidad: "Alta en servidores",
        coste: "Medio-Alto",
        desc: "Almacenamiento de bloques en estado sólido conectado por PCIe."
      },
      {
        nombre: "HDD",
        grupo: "Disco",
        tipo: "bloques",
        usos: ["capacidad-masiva"],
        ejemplos: ["Seagate IronWolf","WD Blue"],
        keywords: ["hdd","disco","magnético"],
        latencia: "Milisegundos",
        rendimiento: "Medio",
        durabilidad: "Media (partes mecánicas)",
        escalabilidad: "Alta en cabinas",
        coste: "Bajo",
        desc: "Disco magnético barato y de gran capacidad para datos fríos."
      },
      {
        nombre: "NAS",
        grupo: "Red/NAS-SAN",
        tipo: "archivos",
        usos: ["capacidad-masiva"],
        ejemplos: ["Synology","QNAP"],
        keywords: ["nas","nfs","smb","ficheros","archivos"],
        latencia: "Dependiente de red",
        rendimiento: "Medio",
        durabilidad: "Alta con RAID",
        escalabilidad: "Moderada",
        coste: "Medio",
        desc: "Almacenamiento por archivos expuesto por red (NFS/SMB)."
      },
      {
        nombre: "SAN",
        grupo: "Red/NAS-SAN",
        tipo: "bloques",
        usos: ["alto-rendimiento"],
        ejemplos: ["Dell EMC PowerMax","HPE 3PAR"],
        keywords: ["san","iscsi","fc","fibre channel","bloque"],
        latencia: "Baja",
        rendimiento: "Alto",
        durabilidad: "Alta con redundancia",
        escalabilidad: "Alta",
        coste: "Alto",
        desc: "Red dedicada de bloques para bases de datos críticas."
      },
      {
        nombre: "Objeto en nube",
        grupo: "Nube (Objeto/Bloque/Fichero)",  // Único miembro visible para pasar A
        tipo: "objetos",
        usos: ["alta-durabilidad"],
        ejemplos: ["AWS S3","Azure Blob","GCS"],
        keywords: ["s3","azure blob","blob","gcs","objeto","object storage","nube"],
        latencia: "Decenas de ms",
        rendimiento: "Variable",
        durabilidad: "Muy alta (11 nueves)",
        escalabilidad: "Masiva",
        coste: "Bajo a medio",
        desc: "Almacenamiento de objetos con APIs HTTP y durabilidad muy alta."
      },
      {
        nombre: "Bloque en nube",
        grupo: "Nube (Bloque)",                // No aparece con el filtro Tipo Nube del enunciado
        tipo: "bloques",
        usos: ["alto-rendimiento"],
        ejemplos: ["AWS EBS","Azure Managed Disks"],
        keywords: ["ebs","managed disks","bloque en nube"],
        latencia: "Baja",
        rendimiento: "Alto",
        durabilidad: "Alta",
        escalabilidad: "Flexible por volumen",
        coste: "Medio",
        desc: "Volúmenes de bloques en la nube montados en máquinas virtuales."
      },
      {
        nombre: "Archivo en nube",
        grupo: "Nube (Fichero)",               // No aparece con el filtro Tipo Nube del enunciado
        tipo: "archivos",
        usos: ["disponibilidad"],
        ejemplos: ["AWS EFS","Azure Files","GCP Filestore"],
        keywords: ["efs","azure files","filestore","archivo en nube"],
        latencia: "Decenas a cientos de ms",
        rendimiento: "Medio",
        durabilidad: "Alta",
        escalabilidad: "Gestionada por el proveedor",
        coste: "Medio",
        desc: "Sistema de archivos gestionado y compartido por red."
      },
      {
        nombre: "BD relacional",
        grupo: "BD (Relacional/NoSQL)",
        tipo: "bases",
        usos: ["alto-rendimiento"], // Para D/E según el anexo
        ejemplos: ["PostgreSQL","MySQL"],
        keywords: ["postgresql","mysql","sql","acid","relacional"],
        latencia: "Depende del motor y del disco",
        rendimiento: "Alto para transacciones ACID",
        durabilidad: "Alta",
        escalabilidad: "Vertical buena, horizontal compleja",
        coste: "Variable",
        desc: "Base de datos estructurada con transacciones ACID."
      },
      {
        nombre: "NoSQL Clave-Valor",
        grupo: "BD (Relacional/NoSQL)",
        tipo: "bases",
        usos: ["latencia-muy-baja"],
        ejemplos: ["Redis","DynamoDB"],
        keywords: ["redis","dynamodb","clave-valor","nosql"],
        latencia: "Muy baja",
        rendimiento: "Muy alto",
        durabilidad: "Variable según configuración",
        escalabilidad: "Horizontal excelente",
        coste: "Variable",
        desc: "Almacenamiento rápido de pares clave-valor, ideal para caché."
      },
      {
        nombre: "Cinta/Archivado",
        grupo: "Archivo/Copia",
        tipo: "backup",
        usos: ["backups-archivado"],
        ejemplos: ["LTO-8","IBM TS1160"],
        keywords: ["cinta","tape","lto","archivado","backup"],
        latencia: "Muy alta (minutos)",
        rendimiento: "Bajo",
        durabilidad: "Muy alta si se conserva bien",
        escalabilidad: "Masiva en librerías",
        coste: "Muy bajo",
        desc: "Soporte físico barato para archivado de largo plazo."
      },
      {
        nombre: "Objeto en nube (frío)",
        grupo: "Nube (Objeto frío)",          // No debe salir en Tipo Archivo/Copia ni en Tipo Nube del anexo
        tipo: "objetos",
        usos: ["backups-archivado"],
        ejemplos: ["S3 Glacier","Blob Archive","GCS Archive"],
        keywords: ["glacier","archive","objeto frío","archive storage"],
        latencia: "Minutos u horas para restaurar",
        rendimiento: "Bajo",
        durabilidad: "Muy alta (11 nueves)",
        escalabilidad: "Masiva",
        coste: "Muy bajo",
        desc: "Clases de objeto para archivado con costes mínimos y recuperación lenta."
      }
    ];

    // Glosario (con ampliación)
    const glosario = [
      { termino: "Latencia", definicion: "Tiempo de respuesta de una operación de almacenamiento." },
      { termino: "IOPS", definicion: "Operaciones de entrada/salida por segundo." },
      { termino: "ACID", definicion: "Atomicidad, consistencia, aislamiento y durabilidad." },
      { termino: "RAID", definicion: "Redundancia y distribución de datos en múltiples discos." },
      { termino: "CAP", definicion: "Compromiso entre consistencia, disponibilidad y tolerancia a particiones." },
      { termino: "Consistencia eventual", definicion: "Las réplicas convergen con el tiempo sin garantía inmediata." },
      { termino: "Throughput", definicion: "Ancho de banda efectivo (MB/s o GB/s), distinto de IOPS." },
      { termino: "RPO", definicion: "Recovery Point Objective. Máxima pérdida de datos aceptable medida en tiempo." },
      { termino: "RTO", definicion: "Recovery Time Objective. Tiempo para restaurar el servicio tras una caída." }
    ];

    // Preguntas (3 base + 3 añadidas)
    const preguntas = [
      { enunciado: "¿Qué medio es más adecuado para archivado de muy bajo coste?", opciones: ["RAM", "SSD NVMe", "Cinta/Archivado"], correcta: "Cinta/Archivado" },
      { enunciado: "¿Cuál sigue el modelo ACID por defecto?", opciones: ["BD relacional", "NoSQL Clave-Valor", "Objeto en nube"], correcta: "BD relacional" },
      { enunciado: "¿Qué sistema expone almacenamiento por archivos en red?", opciones: ["NAS", "SAN", "Bloque en nube"], correcta: "NAS" },
      { enunciado: "¿Qué opción es mejor para un caché distribuido de muy baja latencia?", opciones: ["NoSQL Clave-Valor", "Cinta/Archivado", "Objeto en nube"], correcta: "NoSQL Clave-Valor" },
      { enunciado: "Para compartir carpetas entre instancias sin gestionar servidores, ¿qué elegirías?", opciones: ["Archivo en nube", "Cinta/Archivado", "RAM"], correcta: "Archivo en nube" },
      { enunciado: "Coste mínimo para archivado con recuperación lenta. ¿Qué capa?", opciones: ["Objeto en nube (frío)", "SSD NVMe", "RAM"], correcta: "Objeto en nube (frío)" }
    ];

    // ======= Mapeos de filtros según el anexo =======
    // Tipos visibles exactamente como en el documento
    const TIPOS_UI = [
      "Todos",
      "Disco",
      "Red/NAS-SAN",
      "Nube (Objeto/Bloque/Fichero)",
      "BD (Relacional/NoSQL)",
      "Archivo/Copia",
      "Memoria",
      "Data Warehouse/Lake",
      "Distribuido"
    ];

    // Usos visibles exactamente como en el documento
    const USOS_UI = [
      "Todos",
      "Latencia muy baja",
      "Alto rendimiento",
      "Capacidad masiva",
      "Alta durabilidad",
      "Backups/Archivado",
      "Analítica/BI"
    ];

    // Normaliza el valor de uso UI a los tokens internos
    const usoToken = (ui) => ({
      "Latencia muy baja": "latencia-muy-baja",
      "Alto rendimiento": "alto-rendimiento",
      "Capacidad masiva": "capacidad-masiva",
      "Alta durabilidad": "alta-durabilidad",
      "Backups/Archivado": "backups-archivado",
      "Analítica/BI": "analitica-bi"
    }[ui] || "");

    // ======= Helpers =======
    const $ = s => document.querySelector(s);
    const humanize = s => String(s).replace(/-/g," ").replace(/\b\w/g,m=>m.toUpperCase());

    // Tokeniza búsqueda: admite espacios, /, comas, etc. y exige que TODOS los tokens aparezcan
    function tokenize(q) {
      return (q || "")
        .toLowerCase()
        .normalize("NFD").replace(/[\u0300-\u036f]/g,"")
        .split(/[^a-z0-9\+]+/i)
        .filter(Boolean);
    }

    // Crea un string buscable por item
    function searchableString(item) {
      const parts = [
        item.nombre,
        item.tipo,
        (item.ejemplos || []).join(" "),
        (item.keywords || []).join(" "),
        item.grupo
      ].join(" ").toLowerCase();
      return parts.normalize("NFD").replace(/[\u0300-\u036f]/g,"");
    }

    // ======= Render =======
    function renderCards(list) {
      const container = $("#grid-cards");
      container.innerHTML = "";
      list.forEach(i => {
        const el = document.createElement("article");
        el.className = "bg-white p-5 rounded-2xl shadow border";
        el.innerHTML = `
          <h3 class="text-xl font-semibold">${i.nombre}</h3>
          <p class="mt-1 text-xs text-slate-500">${i.grupo}</p>
          <p class="mt-2 text-sm text-slate-600">${i.desc}</p>
          <ul class="mt-3 text-sm list-disc pl-5">
            <li><span class="font-medium">Tipo:</span> ${humanize(i.tipo)}</li>
            <li><span class="font-medium">Uso:</span> ${i.usos.map(humanize).join(", ")}</li>
            <li><span class="font-medium">Ejemplos:</span> ${i.ejemplos.join(", ")}</li>
            <li><span class="font-medium">Latencia:</span> ${i.latencia}</li>
            <li><span class="font-medium">Rendimiento:</span> ${i.rendimiento}</li>
            <li><span class="font-medium">Durabilidad:</span> ${i.durabilidad}</li>
            <li><span class="font-medium">Escalabilidad:</span> ${i.escalabilidad}</li>
            <li><span class="font-medium">Coste:</span> ${i.coste}</li>
          </ul>
        `;
        container.appendChild(el);
      });
    }

    function renderTabla(list) {
      const tbody = $("#tabla-body");
      tbody.innerHTML = "";
      list.forEach(i => {
        const tr = document.createElement("tr");
        tr.className = "border-t";
        tr.innerHTML = `
          <td class="p-3">${i.nombre}</td>
          <td class="p-3">${humanize(i.tipo)}</td>
          <td class="p-3">${i.usos.map(humanize).join(", ")}</td>
          <td class="p-3">${i.latencia}</td>
          <td class="p-3">${i.rendimiento}</td>
          <td class="p-3">${i.durabilidad}</td>
          <td class="p-3">${i.escalabilidad}</td>
          <td class="p-3">${i.coste}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function renderGlosario() {
      const dl = $("#glosario-list");
      dl.innerHTML = "";
      glosario.forEach(g => {
        const div = document.createElement("div");
        div.innerHTML = `<dt class="font-medium">${g.termino}</dt><dd class="text-sm text-slate-600">${g.definicion}</dd>`;
        dl.appendChild(div);
      });
    }

    function renderQuiz() {
      const form = $("#quiz-form");
      form.innerHTML = "";
      preguntas.forEach((p, idx) => {
        const fs = document.createElement("fieldset");
        fs.className = "space-y-2";
        const name = "q" + (idx + 1);
        fs.innerHTML = `<legend class="font-medium">${idx + 1}. ${p.enunciado}</legend>`;
        p.opciones.forEach(op => {
          const id = `${name}-${op}`.replace(/\s+/g, "_");
          const label = document.createElement("label");
          label.className = "flex items-center gap-2";
          label.innerHTML = `<input type="radio" id="${id}" name="${name}" value="${op}"> <span>${op}</span>`;
          fs.appendChild(label);
        });
        form.appendChild(fs);
      });
      const btn = document.createElement("button");
      btn.type = "submit";
      btn.className = "px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700";
      btn.textContent = "Comprobar";
      form.appendChild(btn);
    }

    function evaluarQuiz() {
      let aciertos = 0;
      preguntas.forEach((p, idx) => {
        const name = "q" + (idx + 1);
        const elegido = document.querySelector(`input[name="${name}"]:checked`);
        if (elegido && elegido.value === p.correcta) aciertos++;
      });
      const out = $("#quiz-resultado");
      out.textContent = `Has acertado ${aciertos} de ${preguntas.length}.`;
      out.className = "mt-4 font-medium " + (aciertos === preguntas.length ? "text-green-700" : "text-amber-700");
    }

    // ======= Filtro =======
    function applyFilter() {
      const tipoUI = ($("#filter-tipo")?.value || "Todos");
      const usoUI  = ($("#filter-uso")?.value  || "Todos");
      const tokens = tokenize(($("#filter-texto")?.value || "").trim());

      const usoTok = usoToken(usoUI);

      const filtrados = items.filter(i => {
        // Tipo
        const okTipo = (tipoUI === "Todos") || (i.grupo === tipoUI);
        if (!okTipo) return false;

        // Uso
        const okUso = (usoUI === "Todos") || (i.usos || []).includes(usoTok);
        if (!okUso) return false;

        // Texto: todos los tokens deben aparecer en el string buscable
        if (tokens.length === 0) return true;
        const s = searchableString(i);
        return tokens.every(t => s.includes(t));
      });

      $("#no-result").classList.toggle("hidden", filtrados.length !== 0);
      renderCards(filtrados);
      renderTabla(filtrados);
    }

    // ======= Inicialización =======
    document.addEventListener("DOMContentLoaded", () => {
      // Poblamos selects con EXACTAMENTE las etiquetas del anexo
      const tipoSel = $("#filter-tipo");
      const usoSel  = $("#filter-uso");
      tipoSel.innerHTML = TIPOS_UI.map(t => `<option value="${t}">${t}</option>`).join("");
      usoSel.innerHTML  = USOS_UI.map(u => `<option value="${u}">${u}</option>`).join("");

      // Eventos
      $("#btn-aplicar")?.addEventListener("click", applyFilter);
      $("#btn-limpiar")?.addEventListener("click", () => {
        tipoSel.value = "Todos";
        usoSel.value  = "Todos";
        $("#filter-texto").value = "";
        applyFilter();
      });

      // Pintado inicial
      renderCards(items);
      renderTabla(items);
      renderGlosario();
      renderQuiz();
      $("#fecha").textContent = new Date().toISOString().split("T")[0];
      $("#no-result").classList.add("hidden");
    });
  </script>
</body>
</html>

